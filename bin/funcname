#!/bin/sh
# @(#) Pick up all function name from source code. Version 1.1.1.20190310
# need Exuberant Ctags

usage() {
    echo "usage: `basename "$0"` [-h] [file ...]" 1>&2
    exit $1
}

opt=
while getopts 'h' opt; do
    case $opt in
    h)      usage 0 ;;
    \?)     usage 1 ;;
    esac
done
shift `expr $OPTIND - 1`

exec ctags --sort=no --fields=K -f - ${@+"$@"} | tr -d \\r | awk '
BEGIN {
    FS = "\t"

    kinds["function"] = 0
    kinds["method"] = 0
    kinds["procedure"] = 0
    kinds["subroutine"] = 0
    kinds["property"] = 0
}

{
    if ($NF in kinds) {
        print $1
    }
}'
